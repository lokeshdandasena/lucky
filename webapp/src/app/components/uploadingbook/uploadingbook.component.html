<head>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1"
    crossorigin="anonymous"
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
    integrity="sha512-+4zCK9k+qNFUR5X+cKL9EIR+ZOhtIloNl9GIKS57V1MyNsYpYcUrUeQc9vNfzsWfV28IaLL3i96P9sdNyeRssA=="
    crossorigin="anonymous"
  />
</head>
<nav class="navbar navbar-expand-lg navbar-light navbaground">
  <div class="container-fluid">
    <a
      class="navbar-brand navtext"
      style="color: antiquewhite"
      routerLink="/dashboard"
      ><i class="fas fa-book-open"></i> Knowledge Hub</a
    >
    <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<div class="page-wrapper bg-red p-t-180 p-b-100 font-robo">
  <div class="wrapper wrapper--w960">
    <div class="shadow-lg mb-5 rounded-3">
      <div class="bg">
        <div class="card card-2">
          <div class="card-heading">
            <div class="container col-md-12 offset-md-1">
              <form [formGroup]="reactiveForm">
                <br />
                <div class="custom-file fileInputProfileWrap">
                  <input
                    type="file"
                    formControlName="image"
                    accept="image/*"
                    (change)="fileChangeEvent($event)"
                    class="fileInputProfile"
                  />

                  <div class="img-space">
                    <ng-container *ngIf="isImageSaved; else elseTemplate">
                      <img [src]="cardImageBase64" />
                    </ng-container>

                    <ng-template #elseTemplate>
                      <img
                        src="/assets/images/book-logo.jpeg"
                        class="img-responsive"
                      />
                    </ng-template>
                  </div>
                </div>
              </form>
            </div>
          </div>
          <div class="card-body" style="width: 80px; height: 90px">
            <div class="container">
              <div class="row">
                <div class="col-md-6 offset-md-3">
                  <div
                    class="bg-blue rounded-2 text-light mb-2 text-center py-2"
                  >
                    <i class="fa fa-book" aria-hidden="true"></i> UPLOAD BOOK
                  </div>
                </div>
              </div>
            </div>
            <div class="container">
              <div class="row">
                <div class="col-md-10 offset-md-1">
                  <form [formGroup]="reactiveForm">
                    <div class="row row-space">
                      <div class="col-2">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Book Title</mat-label>
                          <input
                            matInput
                            formControlName="bookTitle"
                            id="bookTitle"
                          />
                          <div
                            *ngIf="f.bookTitle.touched && f.bookTitle.invalid"
                            class="text-danger"
                          >
                            <div *ngIf="f.bookTitle.errors.required">
                              is required.
                            </div>
                          </div>
                        </mat-form-field>
                      </div>
                      <div class="col-2">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Author Name</mat-label>
                          <input
                            matInput
                            formControlName="authorName"
                            id="authorName"
                          />
                          <div
                            *ngIf="f.authorName.touched &amp;&amp; f.authorName.invalid"
                            class="text-danger"
                          >
                            <div *ngIf="f.authorName.errors.required">
                              is required.
                            </div>
                          </div>
                        </mat-form-field>
                      </div>
                    </div>

                    <div class="row row-space">
                      <div class="col-2">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width"
                        >
                          <mat-label>Genre</mat-label>
                          <mat-select
                            formControlName="bookGenre"
                            id="bookGenre"
                            multiple
                          >
                            <mat-option
                              *ngFor="let topping of toppingList"
                              [value]="topping"
                              >{{ topping }}</mat-option
                            >
                          </mat-select>
                          <div
                            *ngIf="f.bookGenre.touched &amp;&amp; f.bookGenre.invalid"
                            class="text-danger"
                          >
                            <div *ngIf="f.bookGenre.errors.required">
                              is required.
                            </div>
                          </div>
                        </mat-form-field>
                      </div>
                      <div class="col-2">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width"
                        >
                          <mat-label>Language</mat-label>
                          <input
                            matInput
                            formControlName="language"
                            id="language"
                          />
                          <div
                            *ngIf="f.language.touched &amp;&amp; f.language.invalid"
                            class="text-danger"
                          >
                            <div *ngIf="f.language.errors.required">
                              is required.
                            </div>
                          </div>
                        </mat-form-field>
                      </div>
                    </div>
                    <div class="row row-space">
                      <div class="col-2">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Reading Time In Minutes</mat-label>
                          <input
                            matInput
                            type="number"
                            formControlName="readingTimeInMinutes"
                            id="readingTimeInMinutes"
                          />
                          <div
                            *ngIf="
                              f.readingTimeInMinutes.touched &&
                              f.readingTimeInMinutes.invalid
                            "
                            class="text-danger"
                          >
                            <div *ngIf="f.readingTimeInMinutes.errors.required">
                              is required.
                            </div>
                          </div>
                        </mat-form-field>
                      </div>
                      <div class="col-2">
                        <mat-form-field
                          appearance="outline"
                          class="example-full-width1"
                        >
                          <mat-label>Total Pages </mat-label>
                          <input
                            matInput
                            type="number"
                            formControlName="totalPages"
                            id="totalPages"
                          />
                          <div
                            *ngIf="f.totalPages.touched &amp;&amp; f.totalPages.invalid"
                            class="text-danger"
                          >
                            <div *ngIf="f.totalPages.errors.required">
                              is required.
                            </div>
                          </div>
                        </mat-form-field>
                      </div>
                    </div>

                    <mat-form-field
                      appearance="outline"
                      class="example-full-width"
                    >
                      <mat-label>Book Description</mat-label>
                      <textarea
                        matInput
                        formControlName="description"
                        id="description"
                      ></textarea>
                      <div
                        *ngIf="f.description.touched &amp;&amp; f.description.invalid"
                        class="text-danger"
                      >
                        <div *ngIf="f.description.errors.required">
                          is required.
                        </div>
                      </div>
                    </mat-form-field>
                    <div class="col-sm py-2">
                      <input
                        type="file"
                        class="form-control"
                        formControlName="file"
                        id="file"
                        accept=".pdf"
                        (change)="onFileChanged($event)"
                      />
                      <div
                        *ngIf="f.file.touched &amp;&amp; f.file.invalid"
                        class="text-danger"
                      >
                        <div *ngIf="f.file.errors.required">is required.</div>
                      </div>
                    </div>
                    <div class="col-sm py-2 offset-md-5">
                      <!-- <mat-action-row> -->
                      <button
                        mat-raised-button
                        class="button"
                        style="color: white"
                        [disabled]="!reactiveForm.valid"
                        (click)="uploadbook(reactiveForm)"
                      >
                        upload
                      </button>
                      <!-- </mat-action-row> -->
                    </div>
                  </form>
                  <div class="container offset-md-3 row">
                    <div class="col-md-12" style="color: red">
                      <div *ngIf="message">{{ message }}</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
